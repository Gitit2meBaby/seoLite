<?php
/**
 * Plugin Name: Lightweight SEO Plugin
 * Plugin URI: https://your-site.com
 * Description: AI-friendly SEO plugin with React interface - lightweight and powerful
 * Version: 1.0.0
 * Author: Your Name
 * License: GPL v2 or later
 * Text Domain: seo-plugin
 */

// Prevent direct access
if (!defined('ABSPATH')) {
    exit;
}

// Define plugin constants
define('SEO_PLUGIN_VERSION', '1.0.0');
define('SEO_PLUGIN_PATH', plugin_dir_path(__FILE__));
define('SEO_PLUGIN_URL', plugin_dir_url(__FILE__));
define('SEO_PLUGIN_BASENAME', plugin_basename(__FILE__));

// Autoloader for our classes
spl_autoload_register(function ($class) {
    if (strpos($class, 'SEO_Plugin_') === 0) {
        $file = SEO_PLUGIN_PATH . 'includes/class-' . strtolower(str_replace('_', '-', $class)) . '.php';
        if (file_exists($file)) {
            require_once $file;
        }
    }
});

// Main plugin class
class SEO_Plugin {
    
    private static $instance = null;
    
    public static function get_instance() {
        if (null === self::$instance) {
            self::$instance = new self();
        }
        return self::$instance;
    }
    
    private function __construct() {
        $this->init_hooks();
        $this->init_components();
    }
    
    private function init_hooks() {
        // Activation/Deactivation hooks
        register_activation_hook(__FILE__, [$this, 'activate']);
        register_deactivation_hook(__FILE__, [$this, 'deactivate']);
        
        // WordPress hooks
        add_action('init', [$this, 'init']);
        add_action('admin_init', [$this, 'admin_init']);
    }
    
    private function init_components() {
        // Initialize core components
        SEO_Plugin_Settings_Manager::get_instance();
        SEO_Plugin_Admin_Pages::get_instance();
        SEO_Plugin_Meta_Injector::get_instance();
        SEO_Plugin_API_Handler::get_instance();
    }
    
    public function init() {
        // Load text domain for translations
        load_plugin_textdomain('seo-plugin', false, dirname(SEO_PLUGIN_BASENAME) . '/languages');
    }
    
    public function admin_init() {
        // Admin-specific initialization
    }
    
    public function activate() {
        // Create database tables and set default options
        SEO_Plugin_Database::create_tables();
        SEO_Plugin_Settings_Manager::set_default_settings();
        
        // Flush rewrite rules
        flush_rewrite_rules();
    }
    
    public function deactivate() {
        // Cleanup on deactivation
        flush_rewrite_rules();
    }
}

// Initialize the plugin
SEO_Plugin::get_instance();